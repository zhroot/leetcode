var testcase = [[1, 10, 2, 1,0],

[1, 100, 100, 100,6],


[4, 8, 3, 2,1],


[1, 100, 75, 50,2],


[99, 100, 1, 1,0],


[96, 99, 4, 2,0],


[14, 19, 5, 5,0],


[1915, 4451, 2380, 25,0],


[3224, 4554, 334, 151,0],


[1222, 2767, 1482, 1302,0],


[4125, 4664, 285, 61,0],


[1280, 3575, 569, 246,0],


[2915, 3271, 20, 2,0],


[2027, 3742, 1379, 638,0],


[911, 1254, 237, 103,0],


[160, 2650, 1563, 1480,8],


[3995, 4179, 145, 95,0],


[3373, 4742, 461, 336,4],


[2259, 4617, 1020, 650,0],


[2592, 2867, 182, 73,0],


[77, 474, 96, 65,0],


[44, 774, 165, 58,0],


[77, 777, 364, 54,0],


[44, 477, 233, 134,0],


[74, 777, 569, 246,0],


[1915, 4451, 2537, 2537,2],


[3224, 4554, 1331, 1331,4],


[1222, 2767, 1546, 1546,0],


[1915, 4451, 1, 1,1],


[3224, 4554, 1, 1,1],


[1222, 2767, 1, 1,0],


[157, 4678, 2261, 1130,0],
[694, 4474, 1890, 945,0],


[533, 4627, 2047, 1023,0],


[282, 4479, 2099, 1049,0],


[1, 4747, 2373, 1186,0],


[1, 4747, 1, 1,1],


[1, 4747, 4747, 4747,20],


[1, 4747, 8, 3,1],


[1, 4747, 4, 2,0],


[777, 4444, 3667, 3666,0],


[777, 4444, 3668, 3668,2],


[777, 4444, 3668, 3667,1],


[1, 4747, 1052, 81,0],


[1, 4747, 446, 373,6],


[1, 4747, 1899, 345,0],


[1, 4747, 19, 4,0],


[9347723696, 9571920780, 195615841, 154218370,0],


[2333393417, 9544562943, 3790188035, 1306872028,0],


[3434727064, 5306990644, 661022424, 577260426,512],


[3852497597, 5052077036, 106564945, 81282281,256],


[5729529199, 6695255706, 159262941, 79824511,0],


[1606852396, 2164763569, 87630290, 41930822,0],


[8823596914, 9681161364, 170880455, 25195410,0],


[3241098837, 8853343676, 5078969173, 4259523817,1024],


[96, 2048347782, 1480258452, 318337601,0],


[17, 7808832881, 5496032947, 5153288770,1024],


[64, 6882562792, 3360592841, 2808641059,512],


[97, 5195708848, 702456945, 58522006,0],


[99, 9413414523, 9128363832, 6954249838,768],


[1, 10000000000, 65038986, 31016009,128],


[1, 10000000000, 1683104052, 769794991,256],


[1, 10000000000, 5454765462, 3256888704,512],


[1, 10000000000, 9558222065, 5684483791,512],


[1, 10000000000, 4297339257, 1957709038,0],


[1, 10000000000, 10000000000, 10000000000,2046],


[1, 10000000000, 1, 1,1],


[1, 10000000000, 5000000000, 2500000000,256],


[47777, 4444447474, 2222199849, 1111099924,0],


[47444, 4747477774, 2373715165, 1186857582,0],


[74777, 7774774777, 3887350000, 1943675000,256],


[77744, 4444744477, 2222333367, 1111166683,0],


[447778, 444447473, 221999848, 110999924,0],


[447445, 747477773, 373515164, 186757582,128],


[7, 88, 66, 39,2],


[53, 96361194, 342, 1,0],


[398763, 221391366, 4, 4,2],


[1206, 3726511, 7, 5,1],


[2, 21, 12, 9,1],


[8, 24, 1, 1,0],


[37, 54, 4, 4,2],


[9, 43, 5, 5,0],


[3, 4, 1, 1,1],


[1, 10000000000, 913900914, 407734,0],


[1, 10000000000, 619939513, 333666832,256],


[1, 10000000000, 94301452, 31377248,64],


[7437, 10000000000, 50000000, 49900000,320],


[1, 10000000000, 1337, 1331,13],


[1, 10000000000, 10000000, 1000,0],


[1, 9999999999, 827382, 827377,125],


[40, 46, 3, 2,1],


[1, 10000000000, 2000000000, 1300000000,512],


[1, 10, 8, 3,1],


[5, 10, 3, 2,1],


[4, 44, 6, 3,1],


[200000, 999999, 11, 7,1],


[4774444445, 5000000000, 68, 41,2],


[6782916802, 9934429950, 1879588595, 1075074264,256],


[1, 9999999999, 5555555555, 2222222222,0],


[45, 55, 3, 2,1],


[1, 10000000000, 9999999997, 3,0],


[4444444444, 4444444447, 4, 4,2],


[1, 10000000000, 1543143244, 1530344384,768],


[40, 51, 8, 3,1],


[430, 490, 34, 3,0],


[444, 477, 34, 33,3],


[40, 60, 3, 2,1],


[4, 4, 1, 1,1],


[1, 5, 5, 3,0]];

var a,b,jLen,bLen;
var result = 0;
var luckyNumberTable = [];
var luckyCacheTable = [];

for(var i = 0;i<testcase.length;i++){
    var caseArray = testcase[i];
    a = caseArray[0];
    b = caseArray[1];
    jLen = caseArray[2];
    bLen = caseArray[3];
    result = caseArray[4];
    luckyNumberTable = [];
    var beginTime = +new Date();
    var myresult = work();
    var endTime = +new Date();
    if(result !=myresult){
        console.log("bad %d!=%d",myresult,result);
        console.log(caseArray);
    }

    if(endTime - beginTime > 500){
        console.log("time out! %d ms",endTime - beginTime);
        console.log(caseArray);
    }
}
console.log('ok');

function work(){
   // console.log("%d %d %d %d",a,b,jLen,bLen);
    init();
    return find();
}

function init(){
    var powMax = 0;
    var temp = b;
    while(temp > 0 ){
        temp = Math.floor(temp/10);
        powMax++;
    }
    var table = [];
    var tableIndex = 0; 
    var luckyNumIndex = 1;

    var fac,startIndex,stopIndex,findAll,luckyNum,tableLastIndex=0;

    table[tableIndex++] = 4;
    if(4 > a){
        luckyNumberTable.push(4);
        
    }
    table[tableIndex++] = 7;
    if(7 > a){
        luckyNumberTable.push(7);
        
    }
    for(var i=2;i<=powMax;i++){
        fac = Math.pow(10,i-1);
        startIndex = tableLastIndex;
        stopIndex = tableIndex;       
        findAll = false;
        tableLastIndex = tableIndex;     
        for(j=startIndex;j<stopIndex;j++){
            luckyNum = 4*fac + table[j];
            if(luckyNum > b){
                findAll = true;
                break;
            }

            if(luckyNum > a){
                luckyNumberTable.push(luckyNum);
                
            }
                
            table[tableIndex++] = luckyNum;
        }
        if(findAll)
            break;
        for(var j=startIndex;j<stopIndex;j++){
            luckyNum = 7*fac + table[j];
            if(luckyNum > b){
                findAll = 1;
                break;
            }  
            if(luckyNum > a){
                luckyNumberTable.push(luckyNum);
            }             
            table[tableIndex++] = luckyNum;
        }
        if(findAll)
            break;
    } 
    table = [];
}

function makeCache(){
    var luckyNumSize = luckyNumberTable.length;
    for(var i=0;i<luckyNumSize;i++){
        if(luckyNumberTable[i] < start){
            continue;
        }

        if(luckyNumberTable[i] > end){
            break;
        }
        result ++ ;
    }
}

function findLuckyNumberCount(start,end){
    var luckyNumSize = luckyNumberTable.length;
    var result = 0;
    for(var i=0;i<luckyNumSize;i++){
        if(luckyNumberTable[i] < start){
            continue;
        }

        if(luckyNumberTable[i] > end){
            break;
        }
        result ++ ;
    }
    return result;
}

function find(){
    var luckyNumSize = luckyNumberTable.length;
    var luckyNumMax = 0; 
    for(var i=0;i<luckyNumSize;i++){
        var jStart = luckyNumberTable[i] - bLen + 1;
        if(jStart < a){
            jStart = a;
        }
        var jEnd = jStart + jLen - 1;
        
        if(jEnd > b)
            break;
       // console.log("jStart %d jEnd %d",jStart,jEnd);
        var luckyNumMin = findLuckyNumberCount(jStart,jStart + bLen - 1);
        for(var j=0;j<luckyNumSize;j++){
            var bStart = luckyNumberTable[j]+1;
            var bEnd = bStart + bLen - 1;
            //console.log("bStart %d bEnd %d",bStart,bEnd);
            var curluckyNum = 0;
            if(bEnd > jEnd)
                break;
            if(bStart < jStart)
                continue;
            for(var k = j+1;k<luckyNumSize;k++){
                if(luckyNumberTable[k]<= bEnd){
                    curluckyNum++;
                }
                else{
                    break;
                }
            }
            if(luckyNumMin == -1){
                luckyNumMin = curluckyNum;
            } else if(curluckyNum < luckyNumMin){
                luckyNumMin = curluckyNum;
            }
        }
        if(luckyNumMax < luckyNumMin){
            luckyNumMax = luckyNumMin;
        }
    }
    //console.log(luckyNumMax);
    return luckyNumMax;
}
